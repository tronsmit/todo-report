<?xml version="1.0" encoding="UTF-8"?>
<Report>
	<Title><var var="I18N::translate('Research Tasks')" /></Title>
	<Description><var var="I18N::translate('A report of research tasks.')" /></Description>
	<Input name="pageSize" type="select" default="A4" options="letter=>I18N::translateContext('paper size','Letter')|A3=>I18N::translateContext('paper size', 'A3')|A4=>I18N::translateContext('paper size','A4')|legal=>I18N::translateContext('paper size','Legal')"><var var="I18N::translate('Page size')" /></Input>
	<Input name="pageorient" type="select" default="landscape" options="landscape=>I18N::translate('Landscape')|portrait=>I18N::translate('Portrait')"><var var="I18N::translate('Orientation')" /></Input>
	<!--
	<Input name="fonts" type="select" default="dejavusans" options="arialunicid0=>I18N::translateContext('font name', 'Arial')|dejavusans=>I18N::translateContext('font name', 'DejaVu')|helvetica=>I18N::translateContext('font name', 'Helvetica')"><var var="I18N::translate('Font')"/></Input>
	-->
	<SetVar name="fonts" value="dejavusans" />
	<SetVar name="sortby" value="NAME" />
	<!-- Header -->
	<Style name="header" font="$fonts" size="16" style="b" />
	<!-- Page numbers text -->
	<Style name="pagenum" font="$fonts" size="8"/>
	<!-- Standard text -->
	<Style name="text" font="$fonts" size="9"/>
	<!-- Column labels -->
	<Style name="label" font="$fonts" size="10" style="b"/>
	<!-- Generated by style - required style name by the generator -->
	<Style name="genby" font="$fonts" size="8" />
	<!-- Date text -->
	<Style name="date" font="$fonts" size="8"/>
	<Style name="header2" font="$fonts" size="12" style="b" />

	<if condition="$pageorient=='landscape'">
		<!-- landscape orientation -->
		<SetVar name="namewidth" value="180"/>
		<SetVar name="todowidth" value="450"/>
	</if>

	<if condition="$pageorient=='portrait'">
		<!-- portrait orientation -->
		<SetVar name="namewidth" value="150"/>
		<SetVar name="todowidth" value="250"/>
	</if>

	<Doc pageSize="$pageSize" orientation="$pageorient" >
		<Header>
			<Cell align="center" height="20" newline="1" style="header"><var var="I18N::translate('Research tasks')" /></Cell>
			<Cell align="rightrtl" newline="1" style="pagenum"><var var="I18N::translate('Page')" /> <PageNum /> <var var="I18N::translate('of')" /> <TotalPages /></Cell>
		</Header>

		<Body>

		<!-- Research Tasks Section Header -->
			<Cell align="center" height="20" newline="1" style="header2"><var var="I18N::translate('Listing of all the research tasks for individuals')" /></Cell>
			<SetVar name="fill" value="" />
			<if condition="$sortby=='NAME'"><SetVar name="fill" value="#AAAAAA" /></if>
			<TextBox bgcolor="$fill" border="1" height="12" width="$namewidth">
				<Text style="label"><var var="I18N::translate('Name')" /></Text>
			</TextBox>

			<SetVar name="fill" value="" />
			<TextBox bgcolor="$fill" border="1" height="12" width="$todowidth">
				<Text style="label"><var var="I18N::translate('Research task')" /></Text>
			</TextBox>

			<SetVar name="fill" value="" />
			<TextBox bgcolor="$fill" border="1" height="12" newline="1">
				<Text style="label"><var var="I18N::translate('Assigned to')" /></Text>
			</TextBox>

			<!-- Research Tasks for Individuals Section Data -->
			<List list="individual" filter1="REGEXP /\n1 _TODO/" sortby="$sortby">
				<TextBox height="12" width="$namewidth">
					<Text style="text"><GetPersonName id="" />
					<RepeatTag tag="NAME:_MARNM">
						<br /><GedcomValue tag="_MARNM" />
					</RepeatTag>
					<br />XREF: <GedcomValue tag="@id" />
				</Text>
				</TextBox>

				<TextBox height="12" width="$todowidth">
					<Text style="text">«<GedcomValue tag="_TODO" />»:
					<RepeatTag tag="_TODO:NOTE">
						<br /><GedcomValue tag="NOTE" />
					</RepeatTag>
				  </Text>
					<Text style="text">
					<RepeatTag tag="_TODO:SOUR">
						<Gedcom id="@SOUR">
							<br />«Source»: <GedcomValue tag="TITL" /><br />
							<if condition="@AUTH!=''"><GedcomValue tag="AUTH" />, </if>
							<if condition="@PUBL!=''"> (<GedcomValue tag="PUBL" />)</if>
						</Gedcom>
						<if condition="@PAGE!=''"><GedcomValue tag="SOUR:PAGE" /> </if>
						 <GedcomValue tag="SOUR:DATA:TEXT" />
					</RepeatTag>
				  </Text>
				</TextBox>

				<TextBox height="12" newline="1">
					<Text style="text"><GedcomValue tag="_TODO:_WT_USER" /> - <GedcomValue tag="_TODO:DATE" /></Text>
				</TextBox>
			</List>

			<Cell align="rightrtl" height="25" newline="1" style="label">
				<var var="I18N::translate('Total research tasks: ')" /><ListTotal />
			</Cell>

			<!-- Research Tasks for Families Section Header -->
				<Cell align="center" height="20" newline="1" style="header2"><var var="I18N::translate('Listing of all the research tasks for families')" /></Cell>
				<SetVar name="fill" value="" />
				<if condition="$sortby=='NAME'"><SetVar name="fill" value="#AAAAAA" /></if>
				<TextBox bgcolor="$fill" border="1" height="12" width="$namewidth">
					<Text style="label"><var var="I18N::translate('Family')" /></Text>
				</TextBox>

				<SetVar name="fill" value="" />
				<TextBox bgcolor="$fill" border="1" height="12" width="$todowidth">
					<Text style="label"><var var="I18N::translate('Research task')" /></Text>
				</TextBox>

				<SetVar name="fill" value="" />
				<TextBox bgcolor="$fill" border="1" height="12" newline="1">
					<Text style="label"><var var="I18N::translate('Assigned to')" /></Text>
				</TextBox>

			<!-- Research Tasks for Families Section Data -->
			<List list="family" filter1="REGEXP /\n1 _TODO/" sortby="$sortby">
				<TextBox height="12" width="$namewidth">
					<Text style="text"><GetPersonName id="@HUSB" />
						<br /><GetPersonName id="@WIFE" />
						<br />XREF: <GedcomValue tag="@id" />
					</Text>
				</TextBox>

				<TextBox height="12" width="$todowidth">
					<Text style="text">«<GedcomValue tag="_TODO" />»:
					<RepeatTag tag="_TODO:NOTE">
						<br /><GedcomValue tag="NOTE" />
					</RepeatTag>
				  </Text>
				  <Text style="text">
				  <RepeatTag tag="_TODO:SOUR">
					  <Gedcom id="@SOUR">
						  <br />«Source»: <GedcomValue tag="TITL" /><br />
						  <if condition="@AUTH!=''"><GedcomValue tag="AUTH" />, </if>
						  <if condition="@PUBL!=''"> (<GedcomValue tag="PUBL" />)</if>
					  </Gedcom>
					  <if condition="@PAGE!=''"><GedcomValue tag="SOUR:PAGE" /> </if>
					  <GedcomValue tag="SOUR:DATA:TEXT" />
				  </RepeatTag>
				  </Text>
			  </TextBox>

				<TextBox height="12" newline="1">
					<Text style="text"><GedcomValue tag="_TODO:_WT_USER" /> - <GedcomValue tag="_TODO:DATE" /></Text>
				</TextBox>
			</List>

			<Cell align="rightrtl" height="25" newline="1" style="label">
				<var var="I18N::translate('Total research tasks: ')" /><ListTotal />
			</Cell>
		</Body>
		<Footer>
			<Cell align="rightrtl" newline="1" style="date"><Now /></Cell>
		</Footer>
	</Doc>
</Report>
